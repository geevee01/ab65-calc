<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Abundance 65 Payout Calculator</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:wght@400;700&display=swap" rel="stylesheet">
	<style>
		body {
			font-family: 'Chivo Mono', monospace;
			background-color: #1c1c1c;
			color: #fff;
			padding: 20px;
			display: flex;
			flex-direction: column;
			align-items: center;
			min-height: 100vh;
		}
		.container {
			max-width: 600px;
			width: 100%;
			background-color: #333;
			padding: 20px;
			border-radius: 5px;
			box-sizing: border-box;
		}
		.header {
			text-align: center;
			margin-bottom: 20px;
		}
		.header h1 {
			margin: 0;
		}
		.header p {
			margin: 5px 0 0;
			font-size: 0.9em;
			color: #ccc;
		}
		input, select, button {
			padding: 5px 10px;
			margin: 5px;
			font-family: inherit;
		}
		.input-row {
			display: flex;
			justify-content: flex-start;
			align-items: center;
			margin-bottom: 10px;
		}
		.input-row label {
			width: 200px;
			text-align: right;
			margin-right: 10px;
		}
		.output-section {
			text-align: left;
			margin-top: 20px;
			max-width: 500px;
		}
		.output-section h2 {
			text-align: center;
		}
		.output-section p {
			margin: 5px 0;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		.output-section p span:first-child {
			text-align: right;
			margin-right: 10px;
			flex: 1;
		}
		.output-section p span:last-child {
			text-align: left;
			flex: 1;
		}
		.output-section table {
			border-collapse: collapse;
			margin-top: 10px;
			width: 100%;
		}
		.output-section th, .output-section td {
			padding: 5px 10px;
			border: 1px solid #ccc;
		}
		@media (max-width: 600px) {
			.container {
				padding: 10px;
			}
			.input-row label {
				width: 150px;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="header">
			<img src="https://www.insularlife.com.ph/assets/img/logos/logo.png" alt="Insular Life Logo" width="200">
			<h1>Abundance 65 Payout Calculator</h1>
			<p>Created by Gabriel Angelo C. Villar with the help of Claude.ai</p>
			<p>Calculator to figure out the count of periodic payouts and their total, the final policy year and the final payout amount on maturity, and the maturity year and overall payout amount. It shows the actual periodic payout years, too!</p>
		</div>
		<p style="text-align: center;">Enter policy details below:</p>
		<div class="input-row">
			<label for="coverageAmount">Coverage:</label>
			<input type="number" id="coverageAmount" placeholder="e.g. 100000" required>
		</div>
		<div class="input-row">
			<label>Insured's Birthdate:</label>
			<select id="birthMonth" required>
				<option value="">Month</option>
				<option value="1">Jan</option>
				<option value="2">Feb</option>
				<option value="3">Mar</option>
				<option value="4">Apr</option>
				<option value="5">May</option>
				<option value="6">Jun</option>
				<option value="7">Jul</option>
				<option value="8">Aug</option>
				<option value="9">Sep</option>
				<option value="10">Oct</option>
				<option value="11">Nov</option>
				<option value="12">Dec</option>
			</select>
			<select id="birthYear" required>
				<option value="">Year</option>
				<?php
				$currentYear = date('Y');
				for ($year = $currentYear; $year >= 1940; $year--) {
					echo "<option value='$year'>$year</option>";
				}
				?>
			</select>
		</div>
		<div class="input-row">
			<label>Policy Start:</label>
			<select id="policyStartMonth" required>
				<option value="">Month</option>
				<option value="1">Jan</option>
				<option value="2">Feb</option>
				<option value="3">Mar</option>
				<option value="4">Apr</option>
				<option value="5">May</option>
				<option value="6">Jun</option>
				<option value="7">Jul</option>
				<option value="8">Aug</option>
				<option value="9">Sep</option>
				<option value="10">Oct</option>
				<option value="11">Nov</option>
				<option value="12">Dec</option>
			</select>
			<select id="policyStartYear" required>
				<option value="">Year</option>
				<?php
				$currentYear = date('Y');
				for ($year = $currentYear; $year >= 1940; $year--) {
					echo "<option value='$year'>$year</option>";
				}
				?>
			</select>
		</div>
		<button onclick="calculatePayouts()">Calculate Payouts</button>
		<div id="output" class="output-section">
			<h2>Policy Payouts</h2>
		</div>
	</div>

	<script>
		function calculatePayouts() {
			const coverageAmount = parseFloat(document.getElementById("coverageAmount").value);
			const birthMonth = parseInt(document.getElementById("birthMonth").value);
			const birthYear = parseInt(document.getElementById("birthYear").value);
			const policyStartMonth = parseInt(document.getElementById("policyStartMonth").value);
			const policyStartYear = parseInt(document.getElementById("policyStartYear").value);

			if (isNaN(coverageAmount) || isNaN(birthMonth) || isNaN(birthYear) || isNaN(policyStartMonth) || isNaN(policyStartYear)) {
				document.getElementById("output").innerHTML = "<p style='text-align: center;'>Please enter valid numbers for all fields.</p>";
				return;
			}

			const periodicPayoutYears = [];
			const periodicPayoutAmount = coverageAmount * 0.1;
			let periodicPayoutsCount = 0;
			let periodicPayoutsTotal = 0;

			const birthDate = new Date(birthYear, birthMonth - 1);
			const policyStartDate = new Date(policyStartYear, policyStartMonth - 1);
			const insuranceEndYear = birthDate.getFullYear() + 65;
			const finalPayoutYear = insuranceEndYear;

			for (let year = policyStartYear + 11; year < insuranceEndYear; year += 2) {
				periodicPayoutYears.push(year);
				periodicPayoutsCount++;
				periodicPayoutsTotal += periodicPayoutAmount;
			}

			const finalPayoutAmount = coverageAmount;
			const totalPayouts = periodicPayoutsTotal + finalPayoutAmount;

			function formatNumber(number) {
				return number.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, "$&,");
			}

			let output = "";
			output += `<p><span>Count of Periodic Payouts:</span><span>${periodicPayoutsCount}</span></p>`;
			output += `<p><span>Total Sum of Periodic Payouts:</span><span>${formatNumber(periodicPayoutsTotal)}</span></p>`;
			output += `<p><span>Final Policy Year:</span><span>${finalPayoutYear}</span></p>`;
			output += `<p><span>Final Payout:</span><span>${formatNumber(finalPayoutAmount)}</span></p>`;
			output += `<p><span>Total of Periodic and Final Payouts:</span><span>${formatNumber(totalPayouts)}</span></p>`;
			output += "<p style='text-align: center;'>Years of Periodic Payouts:</p>";
			output += "<table><tr><th>Count</th><th>Year</th></tr>";
			periodicPayoutYears.forEach((year, index) => {
				output += `<tr><td>${index + 1}</td><td>${year}</td></tr>`;
			});
			output += "</table>";

			document.getElementById("output").innerHTML = output;
		}
	</script>
</body>
</html>